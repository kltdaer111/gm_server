<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5shiv.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
	<link rel="stylesheet" type="text/css" href="../dep/static/h-ui/css/H-ui.min.css" />
	<link rel="stylesheet" type="text/css" href="../dep/static/h-ui.admin/css/H-ui.admin.css" />
	<link rel="stylesheet" type="text/css" href="../dep/lib/Hui-iconfont/1.0.8/iconfont.css" />
	<link rel="stylesheet" type="text/css" href="../dep/static/h-ui.admin/skin/default/skin.css" id="skin" />
	<link rel="stylesheet" type="text/css" href="../dep/static/h-ui.admin/css/style.css" />
	<link rel="stylesheet" type="text/css" href="../dep/lib/layui/css/layui.css" />
	<script type="text/javascript" src="../dep/lib/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="../dep/static/h-ui/js/H-ui.min.js"></script>
	<script type="text/javascript" src="../dep/static/h-ui.admin/js/H-ui.admin.js"></script>
	<script type="text/javascript" src="../dep/lib/My97DatePicker/4.8/WdatePicker.js"></script>
	<script type="text/javascript" src="../dep/lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="../dep/lib/layui/layui.js" charset="utf-8"></script>
	<script type="text/javascript" src="../dep/js/server_list_common.js" charset="utf-8"></script>
	<script type="text/javascript" src="../dep/js/common.js" charset="utf-8"></script>
	<script type="text/javascript" src="../dep/lib/hcharts/Highcharts/5.0.6/js/highcharts.js"></script>
	<script type="text/javascript" src="../dep/lib/hcharts/Highcharts/5.0.6/js/modules/exporting.js"></script>
	<script type="text/javascript" src="../dep/js/config.js" charset="utf-8"></script>
	<title>后台监控</title>
	<style type="text/css">
	</style>
</head>

<body>
	<div class="layui-tab layui-tab-card">
		<ul class="layui-tab-title">
			<li class="layui-this">渠道标签</li>
			<li>账号服配置</li>
			<li>登录服配置</li>
		</ul>
		<div class="layui-tab-content">
			<div class="layui-tab-item layui-show" id="tab_mark">
				<form class="layui-form" action="">
					<div class="layui-row">
						<div class="layui-col-lg1">
							<label class="layui-form-label">游戏</label>
						</div>
						<div class="layui-col-lg4">
							<select name="choose_game" lay-filter="tab_mark_choose_game">
								<option value="">请选择游戏</option>
								<option value="0">少年逆命师</option>
							</select>
						</div>

						<div class="layui-col-lg1">
							<label class="layui-form-label">标签分组</label>
						</div>

						<div class="layui-col-lg4">
							<select name="choose_group" lay-verify="required">
								<option value="">请选择标签分组</option>
							</select>
						</div>

						<div class="layui-col-lg1 layui-col-md-offset1">
							<div class="layui-btn-group">
								<button class="layui-btn" lay-submit lay-filter='tab_mark_query'>查询</button>
								<button class="layui-btn layui-btn-disabled" lay-submit lay-filter='tab_mark_new'>新增</button>
							</div>
						</div>
					</div>
					<div class="layui-row">
						<div class="layui-input-block"></div>
					</div>
				</form>
			</div>
			<div class="layui-tab-item">
				账号服配置
			</div>
			<div class="layui-tab-item">
				登录服配置
			</div>
		</div>
	</div>
</body>
<script>
	function ThisInterface(id, layui) {
		this.id = id;
		this.label = '#' + this.id;
		this.layui = layui;
	}

	ThisInterface.prototype.init = function(){
		this.listenSelectGame();
		this.listenQuery();
		this.listenNew();
	}

	ThisInterface.prototype.gen = function () {
		$(this.label).append('');
	}

	ThisInterface.prototype.getSelector = function (selector) {
		if(selector === undefined){
			return '#' + this.id;
		}
		return '#' + this.id + ' ' + selector;
	}

	ThisInterface.prototype.getFilterName = function (name) {
		return this.id + '_' + name;
	}

	ThisInterface.prototype.listenSelectGame = function () {
		var self = this;
		this.layui.use(['form'], function () {
			var form = self.layui.form;
			var filter = 'select(' + self.getFilterName('choose_game') + ')';
			form.on(filter, function (data) {
				var selector = self.getSelector('[name="choose_group"]');
				$(selector).empty();
				$(selector).append("<option value='a'>a</option>");
				renderForm();
			});
		});
	}

	ThisInterface.prototype.listenQuery = function () {
		var self = this;
		this.layui.use(['form'], function () {
			var form = self.layui.form;
			var filter = 'submit(' + self.getFilterName('query') + ')';
			form.on(filter, function (data) {
				console.log(data);
				//
				if(self.query_func !== undefined){
					self.query_func(postion_selector);
				}
				return false;
			});
		});
	}

	ThisInterface.prototype.regQueryFunc = function(query_func){
		this.query_func = query_func;
	}

	ThisInterface.prototype.listenNew = function () {
		var self = this;
		this.layui.use(['form'], function () {
			var form = self.layui.form;
			var filter = 'submit(' + self.getFilterName('new') + ')';
			form.on(filter, function (data) {
				console.log(data);
				if(data.elem.className === "layui-btn layui-btn-disabled"){
					return false;
				}
				//添加新标签
				if(self.new_func !== undefined){
					self.new_func();
				}
				return false;
			});
		});
	}

	ThisInterface.prototype.regNewFunc = function(new_func){
		this.new_func = new_func;
	}

	

	var interface_mark = new ThisInterface('tab_mark', layui);
	interface_mark.init();

	layui.use(['form', 'layedit', 'element', 'table', 'laydate', 'layer'], function () {
		var form = layui.form;
		// form.on('select(tab_mark_choose_game)', function (data) {
		// 	// console.log(data);
		// 	// $('#tab_mark [name="choose_group"]').empty();
		// 	// $('#tab_mark [name="choose_group"]').append("<option value='a'>a</option>");

		// 	// for (name in server_group_data) {
		// 	// 	$(label).append("<option value='" + name + "'>" + name + "</option>");
		// 	// }
		// 	renderForm();
		// });
	});
</script>

</html>